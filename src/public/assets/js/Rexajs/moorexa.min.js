if(!Element.prototype.prepend){Element.prototype.prepend=function(elem){this.insertBefore(elem,this.firstElementChild);}}if(!Element.prototype.get){Element.prototype.get=function(elem){if(this.hasAttribute(elem)){return this.getAttribute(elem);}return this.querySelector(elem);}}if(!Element.prototype.all){Element.prototype.all=function(elem){return this.querySelectorAll(elem);}}if(!Element.prototype.set){Element.prototype.set=function(attr,val){return this.setAttribute(attr,val);}}
function eventTrigger(eventType,eventName,callback){if(eventName.addEventListener){return eventName.addEventListener(eventType,callback);}else if(eventName.attachEvent){return eventName.attachEvent(eventType,callback);}else{var attach="on"+eventType;return eventName[attach]=callback;}}if(!Element.prototype.trigger){Element.prototype.trigger=function(event){var ev;try{if(this.dispatchEvent&&CustomEvent){ev=new CustomEvent(event,{detail : event+'fired!'});this.dispatchEvent(ev);}else{throw "CustomEvent Not supported";}}catch(e){if(document.createEvent){ev=document.createEvent('HTMLEvents');ev.initEvent(event,true,true);this.dispatchEvent(event);}else{ev=document.createEventObject();ev.eventType=event;this.fireEvent('on'+event.eventType,event);}}}}
function Event(ele,event,callback){if(ele.addEventListener){ele.addEventListener(event,callback);}else if(ele.attachEvent){ele.attachEvent(event,callback);}else if(ele['on'+event]){ele['on'+event]=callback;}else{return false;}}if(!String.prototype.capitalize){String.prototype.capitalize=function(){var str=this.toString(),exp=str.split("");var string="";for(var st in exp){var frs=exp[st].substr(0,1).toUpperCase(),other=exp[st].substr(1),cap=frs+other;string +=cap;}return string;}}var AlertController={message: '',buttons : '',create: function(obj){this.message=obj.content;var alertwrapper=document.querySelector('*[data-alert="wrapper"]');if(alertwrapper===null){alertwrapper=document.createElement('div');alertwrapper.setAttribute('data-alert','wrapper');alertwrapper.innerHTML='<div class="alert-overlay"><div class="alert-card"><div class="card-header"data-alert="header"></div><div class="card-content"data-alert="content"><p></p></div><div class="card-button"align="left"data-alert="buttons"><button name="ok"type="button"data-alert="ok">Ok</button></div></div></div>';document.body.appendChild(alertwrapper);}var header=document.querySelector('*[data-alert="header"]');var content=document.querySelector('*[data-alert="content"]');var alertbtns=document.querySelector('*[data-alert="buttons"]');if('button'in obj){if(typeof obj.button=='object'){alertbtns.innerHTML="";for(var btn in obj.button){var btnele=document.createElement('button');btnele.name=btn.toLowerCase();btnele.type='button';btnele.setAttribute('data-alert',btn);btnele.innerText=btn.capitalize();alertbtns.appendChild(btnele);}}
this.buttons=obj.button;}header.innerHTML=obj.title;content.innerHTML='<p>'+obj.content+'</p>';return this;},present: function(){if(this.message!==""){var alertoverlay=document.querySelector('.alert-overlay'),alertcard=document.querySelector('.alert-card');alertoverlay.style.display='block';setTimeout(function(){alertcard.style.transform='translateY(0px)';alertcard.style.opacity='1';},100);if(this.buttons!==""){var alertbtns=document.querySelector('*[data-alert="buttons"]'),alertchilds=alertbtns.children;var buttons=this.buttons;[].forEach.call(alertchilds,function(ele){Event(ele,'click',function(){alertcard.style.transition='transform 0.3s ease-in-out,opacity 0.5s ease-in-out';alertcard.style.opacity='0';alertcard.style.transform='translateY(-100vh)';setTimeout(function(){alertoverlay.style.display='none';alertcard.removeAttribute('style');},500);var da=ele.getAttribute('data-alert');buttons[da].call(this);});});}else{var okalert=document.querySelector('*[data-alert="ok"]');Event(okalert,'click',function(){alertcard.style.transition='transform 0.3s ease-in-out,opacity 0.5s ease-in-out';alertcard.style.opacity='0';alertcard.style.transform='translateY(-100vh)';setTimeout(function(){alertoverlay.style.display='none';alertcard.removeAttribute('style');},500);});}}else{console.log('Failed to display alert.Message empty!');}return this;},dismiss: function(){var alertcard=document.querySelector('.alert-card');alertcard.style.transition='transform 0.3s ease-in-out,opacity 0.5s ease-in-out';alertcard.style.opacity='0';alertcard.style.transform='translateY(-100vh)';setTimeout(function(){alertoverlay.style.display='none';alertcard.removeAttribute('style');},500);}};var LoadingController={duration: '',enableDismiss: false,titleTimer: false,create: function(obj){var loaderwrapper=document.querySelector('.mor-loader-wrapper');if(loaderwrapper==null){loaderwrapper=document.createElement('div');loaderwrapper.className='mor-loader-wrapper';loaderwrapper.innerHTML='<div class="mor-loader"><div class="mor-loader-inner"align="center"><span class="loading-circle"></span><span class="loading-text"></span></div></div>';document.body.appendChild(loaderwrapper);}var loaderinner=document.querySelector('.mor-loader-inner');if('title'in obj){loaderinner.lastElementChild.innerText=obj.title;}if('duration'in obj){this.duration=parseInt(obj.duration);}if('enableDismiss'in obj){this.enableDismiss=Boolean(obj.enableDismiss);}return this;},present: function(){var morloader=document.querySelector('.mor-loader');if(morloader){morloader.style.display='block';if(this.duration!==""){setTimeout(function(){document.querySelector('.mor-loader').style.display='none';},this.duration);}if(this.enableDismiss!==false){var morloader=document.querySelector('.mor-loader');Event(morloader,'click',function(){this.style.display='none';});}}},title: function(title,delay=false){var loaderinner=document.querySelector('.mor-loader-inner');if(title!=""){if(delay!==false){this.titleTimer=parseInt(delay);setTimeout(function(){loaderinner.lastElementChild.innerText=title;},parseInt(delay));}else{loaderinner.lastElementChild.innerText=title;}}},dismiss: function(delay=false){var morloader=document.querySelector('.mor-loader');if(morloader){if(delay===false){if(this.titleTimer==false){morloader.style.display='none';}else{setTimeout(function(){setTimeout(function(){morloader.style.display='none';},200);},this.titleTimer);}}else{if(this.titleTimer==false){setTimeout(function(){morloader.style.display='none';},parseInt(delay));}else{setTimeout(function(){setTimeout(function(){morloader.style.display='none';},parseInt(delay));},this.titleTimer);}}}}};var ModalController={push : function(obj){var modalwrapper=document.querySelector('.mor-modal-wrapper');if(modalwrapper==null){modalwrapper=document.createElement('div');modalwrapper.className='mor-modal-wrapper';modalwrapper.innerHTML='<div class="mor-modal-container"><div class="mor-modal-container-inner"><div class="mor-js-modal-body"></div><div class="mor-modal-buttons"style="display:none"><button name="save"class="btn mor-btn"data-modal-action="other"style="display: none;">Save</button><button name="save"class="btn mor-btn"data-modal-action="cancel">Close</button></div></div></div>';document.body.appendChild(modalwrapper);}else{modalwrapper=document.querySelector('.mor-modal-wrapper');}var http=HTTP,loader=LoadingController.create({duration: 800000,enableDismiss: false,content: 'Please wait'});Event(modalwrapper,'click',function(e){if(e.target.className==modalwrapper.className||e.target.className=='mor-modal-container'){var modalcontainer=modalwrapper.querySelector('.mor-modal-container-inner');modalcontainer.style.opacity='0';modalcontainer.style.transform='translateY(-150px)';setTimeout(function(){modalwrapper.style.display='none';},400);}});if(typeof obj=='object'){if(typeof obj.page=='string'){var query=$url+obj.page||"";query +='?modal=true&modalText=loadingFromModal&from=js';}var modalcontainer=modalwrapper.querySelector('.mor-modal-container-inner');var btn=modalwrapper.querySelector('*[data-modal-action="other"]');if('cancel'in obj){if(obj.cancel==false){btn.parentNode.style.display="none";btn.nextElementSibling.style.display="none";}else{btn.parentNode.style.display="block";}}else{btn.parentNode.style.display="block";}if('button'in obj){var form=document.createElement('form');form.method=obj.method||'post';form.name="modalform";form.enctype='multipart/form-data';btn.parentNode.style.display="block";var buttonName="";if(typeof obj.button!='object'){btn.name=obj.button;buttonName=obj.button;}else{for(var ob in obj.button){btn.name=ob;buttonName=ob;}}btn.innerText=buttonName.capitalize();btn.style.display='inline-block';form.innerHTML=modalcontainer.innerHTML;modalcontainer.innerHTML="";modalcontainer.appendChild(form);if('auto'in obj){var btn=modalwrapper.querySelector('*[data-modal-action="other"]');Event(btn,'click',function(e){e.preventDefault();var fb=document.forms['modalform'];var formdata=new FormData();var _continue=true;for(var f=0;f<fb.length;f++){if(fb[f].nodeName!='BUTTON'){if(fb[f].hasAttribute('required')){if(fb[f].value.length <=0){_continue=false;break;}}formdata.append('modal['+fb[f].name+']',fb[f].value||fb[f].innerHTML);}}if(_continue===true){formdata.append('modal[__data__]',JSON.stringify(obj.data)||"");var http=HTTP;loader.present();var alertctrl=AlertController;$http.post($url+'moorexa/updateModal',formdata,function($res){loader.dismiss();$res=JSON.parse($res);if(typeof obj.button=='object'){obj.button[buttonName].call(this,$res);}if($res.status=='success'){alertctrl.create({title : 'Success',content : 'Information submitted successfully'});alertctrl.present();if('clear'in obj){for(var f=0;f<fb.length;f++){if(fb[f].nodeName!='BUTTON'){if(fb[f].value){fb[f].value="";}else{fb[f].innerHTML="";}}}}}else{if("reason"in $res){alertctrl.create({title : 'Failed!',content : 'Data submission failed.'+ $res.reason});}else{alertctrl.create({title : 'Failed!',content : 'Data submission failed.Try again please!'});}alertctrl.present();}});}else{var alertctrl=AlertController.create({title : 'Error',content : 'All fields are required!'});alertctrl.present();}return false;});}}loader.present();var modalbody=modalwrapper.querySelector('.mor-js-modal-body');if('class'in obj){var cn=modalbody.className;if(cn.indexOf(obj.class)<=0){modalbody.className +=''+obj.class;}}if(typeof obj.page=='string'){if('data'in obj){var formdata=new FormData();if('method'in obj){if(obj.method.toLowerCase()=='post'){formdata.append('modal[data]',JSON.stringify(obj.data));$http.post(query,formdata,__callback);}else{query +="&modal="+JSON.stringify(obj.data);$http.get(query,__callback);}}else{formdata.append('modal[data]',JSON.stringify(obj.data));$http.post(query,formdata,__callback);}}else{$http.get(query,__callback);}}else{modalbody.innerHTML=obj.page.innerHTML;modalwrapper.style.display='block';setTimeout(function(){modalcontainer.style.opacity='1';modalcontainer.style.transform='translateY(0px)';setTimeout(function(){loader.dismiss();},200);},300);}
function __callback($res){modalbody.innerHTML=$res;modalwrapper.style.display='block';setTimeout(function(){modalcontainer.style.opacity='1';modalcontainer.style.transform='translateY(0px)';setTimeout(function(){loader.dismiss();},200);},300);}var cancel=modalwrapper.querySelector('*[data-modal-action="cancel"]');Event(cancel,'click',function(e){e.preventDefault();var modalcontainer=modalwrapper.querySelector('.mor-modal-container-inner');modalcontainer.style.opacity='0';modalcontainer.style.transform='translateY(-150px)';setTimeout(function(){modalwrapper.style.display='none';},400);return false;});}}};var script=document.querySelector('*[data-moorexa-appurl]');var $url=script!=null?script.getAttribute('data-moorexa-appurl'): false;var hidealert2=function(){var alcls=document.querySelector('*[data-cancel="confirm"]');var dataoverlay=document.querySelector('*[data-overlay="remove"]');if(alcls!==null){Event(alcls,'click',function(e){e.preventDefault();var http=HTTP;$http.get($url+'moorexa?clear_cache_olddata=ajax',function($res){});document.querySelector('.confirm-delete').style.display='none';});}if(dataoverlay!==null){Event(dataoverlay,'click',function(d){d.preventDefault();document.querySelector('.alert-overlay2').style.display="none";document.body.removeChild(document.querySelector('.alert-overlay2'));})}}();function hrefroute(){this.route=document.querySelectorAll('*[data-href-route-to]');var loader=LoadingController.create({duration: 70000,enableDismiss: true});[].forEach.call(this.route,function(ele){Event(ele,'click',function(e){e.preventDefault();e.cancelBubble=true;loader.present();window.scrollTop=0;document.body.setAttribute('id','animate-page-out');changestate(ele.getAttribute('data-href-route-to'),loader);return false;});});}var __lastpageTitle="";var __lastpageData="";var __lastpageUrl="";var _freshpage=true;function changestate(url,loader,title=null){var http=HTTP;__lastpageData=document.body.innerHTML;__lastpageUrl=location.href;document.body.setAttribute('data-history',__lastpageUrl);document.body.setAttribute('data-history-title',document.title);var $path=url.replace($url,'');$path=$url+$path;$http.get($path,(data)=>{var domele=document.createElement('html');domele.innerHTML=data.text;var head=domele.querySelector('head');if(head!=null){var dt=head.querySelector('title');if(dt!=null){document.title=dt.innerText;}}var body=domele.querySelector('body');if(body!=null){var scripts=body.querySelectorAll('script');var mainScripts=document.body.querySelectorAll('script');var replace=false;[].forEach.call(scripts,(s)=>{[].forEach.call(mainScripts,(m)=>{if(m.outerHTML==s.outerHTML){body.removeChild(s);}});});loader.dismiss();document.body.innerHTML=body.innerHTML;}else{loader.dismiss();document.body.innerHTML=data.text;}window.history.pushState({"html": document.body.innerHTML,"pageTitle": document.title},"",$path);hrefroute();__morform();formalert();__inputframe();loadtextdeff();loaddatasrc();});}
function __inputframe(){var datainputframe=document.querySelectorAll('*[data-input-frame]');if(datainputframe.length>0){[].forEach.call(datainputframe,function(ele){var input=document.createElement('input');Event(ele.parentNode,'dblclick',function(){var inner=ele.innerText;var width=ele.offsetWidth+'px';input.type='text';input.setAttribute('style','border:none;outline:none;color:#fff;background:none;padding:0;width:'+width+';display:block;');input.name='inputframe';input.value=inner;input.setAttribute('data-rename',ele.firstElementChild.outerHTML);input.setAttribute('data-rename-text',inner);ele.innerHTML="";ele.appendChild(input);input.focus();ele.setAttribute('data-has-input',true);ele.removeAttribute('data-use-enter',true);Event(input,'keypress',function(ke){if(ke.key=="Enter"){ele.setAttribute('data-use-enter',true);RenameFile(ele,input);}});Event(input,'blur',function(){if(!ele.hasAttribute('data-use-enter')){RenameFile(ele,input);}else{ele.removeAttribute('data-use-enter');}});grabCheckbox(ele.innerText,true);});Event(ele.parentNode,'click',function(){if(!ele.hasAttribute('data-has-input')){grabCheckbox(ele.innerText);}else{grabCheckbox(ele.innerText,true);}});function grabCheckbox(inner,hide=false){var checkbox=document.querySelector('*[data-dir-checkbox="'+inner+'"]');if(checkbox!=null){if(checkbox.checked==false){if(hide==true){var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=false;});}else{var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=false;});checkbox.checked=true;}}else{checkbox.checked=false;}}}});var datatableedit=document.querySelector('*[data-table-edit]');if(datatableedit!==null){Event(datatableedit,'click',function(){var url=datatableedit.getAttribute('data-table-edit');var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');var path="";[].forEach.call(allcheckbox,function(ac){if(ac.checked==true){path=ac.getAttribute('data-input-path');}});if(path!=""){var query=url+'?edit='+path;var winx=window.open(query,'_blank','location=no,width=800,height=600,scrollbar=yes');winx.moveTo(200,50);var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=false;});}});}var datatableupload=document.querySelector('*[data-table-upload]');if(datatableupload!==null){Event(datatableupload,'click',function(){var url=datatableupload.getAttribute('data-table-upload');var loc=location,query="";if(loc.search!=""){query=url+loc.search+'&upload=true';}else{query=url+'?upload=true';}var winx=window.open(query,'_self','location=no,width=800,height=600,scrollbar=yes');winx.moveTo(200,50);});}var datatabledownload=document.querySelector('*[data-table-download]');if(datatabledownload!==null){Event(datatabledownload,'click',function(){var url=datatabledownload.getAttribute('data-table-download');var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');var path="";var form=document.createElement('form');var df=document.querySelector('*[name="__download__form"]');if(df!==null){df.innerHTML="";}form.style.display='none';form.action='';form.method='post';form.name='__download__form';form.innerHTML="";var par=this.parentNode;[].forEach.call(allcheckbox,function(ac){if(ac.checked==true){var div=document.createElement('div');var input=document.createElement('input');input.name='zip[]';path=ac.getAttribute('data-input-path');input.value=path;input.style.display='none';div.appendChild(input);if(df===null){form.appendChild(div);}else{df.appendChild(div);}ac.checked=false;}});if(df===null){par.appendChild(form);if(form.children.length>0){form.submit();}}else{if(df.children.length>0){df.submit();}}});}var datatabledelete=document.querySelector('*[data-table-delete]');if(datatabledelete!==null){var url=datatabledelete.getAttribute('data-table-delete');Event(datatabledelete,'click',function(){var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');var path="";[].forEach.call(allcheckbox,function(ac){if(ac.checked==true){path +=ac.getAttribute('data-input-path')+',';}});if(path!=""){var form=datatabledelete.lastElementChild;form.lastElementChild.innerHTML=path;form.submit();}});}var datatablerename=document.querySelector('*[data-table-rename]');if(datatablerename!==null){Event(datatablerename,'click',function(){var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');var last="";[].forEach.call(allcheckbox,function(ac){if(ac.checked==true){last=ac.parentNode;}});if(last!==""){var ele=last.nextElementSibling.firstElementChild;if(!datatablerename.hasAttribute('data-clicked')){var inner=ele.innerText;input=document.createElement('input');var width=ele.offsetWidth+'px';input.type='text';input.setAttribute('style','border:none;outline:none;color:#fff;background:none;padding:0;width:'+width+';display:block;');input.name='inputframe';input.value=inner;input.setAttribute('data-rename',ele.firstElementChild.outerHTML);input.setAttribute('data-rename-text',inner);ele.innerHTML="";ele.appendChild(input);input.focus();ele.setAttribute('data-has-input',true);ele.removeAttribute('data-use-enter',true);datatablerename.setAttribute('data-clicked',true);}else{if(!ele.hasAttribute('data-use-enter')){RenameFile(ele,input);}else{ele.removeAttribute('data-use-enter');}datatablerename.removeAttribute('data-clicked');var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=false;});}}});}var datacheckbox=document.querySelector('*[data-checkbox="selectall"]');if(datacheckbox!==null){Event(datacheckbox,'click',function(){if(this.checked==true){var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=true;});}else{var allcheckbox=document.querySelectorAll('*[data-dir-checkbox]');[].forEach.call(allcheckbox,function(ac){ac.checked=false;});}});}
function RenameFile(ele,input){ele.removeAttribute('data-has-input');var prev=input.getAttribute('data-rename');var rtext=input.getAttribute('data-rename-text');var text=input.value;if(text.length>0){ele.innerHTML=prev+text;}else{ele.innerHTML=prev+rtext;}if(text!=rtext){var formdata=new FormData();formdata.append('renamefile[path]',ele.getAttribute('data-input-path'));formdata.append('renamefile[dir]',ele.getAttribute('data-input-dir'));formdata.append('renamefile[name]',text);formdata.append('renamefile[old_name]',prev);var http=HTTP;var path=$url+'moorexa/__RenameFile';$http.post(path,formdata,function($res){});}}}}__inputframe();function uploadDrag(ev,leave=false){ev.preventDefault();var dragupload=document.querySelector('#drag-upload');if(leave===true){dragupload.classList.remove('drag-highlight');}else{dragupload.classList.add('drag-highlight');}}
function fileUploader(){var browsefiles=document.querySelector('#browsefiles');if(browsefiles!=null){Event(browsefiles,'change',function(e){handleFileUpload(this.files);});}}
function reloadPageClose(){window.close();window.location.reload();}
function uploadDrop(ev){ev.preventDefault();var dragupload=document.querySelector('#drag-upload');dragupload.classList.remove('drag-highlight');var dt=ev.dataTransfer;var files=dt.files;handleFileUpload(files);}
function handleFileUpload(files){[].forEach.call(files,function(file){var uploadprogress=document.querySelector('#upload-progress');var http=HTTP;var folder=uploadprogress.getAttribute('data-upload-folder'),query=$url+'moorexa/uploadFiles?folder='+folder;if(file.type!=""){var formdata=new FormData();formdata.append('file',file);var div,progress,h3,span;div=document.createElement('div');div.className='fileuploadlist';progress=document.createElement('progress');progress.setAttribute('min',0);progress.setAttribute('max',100);progress.value=0;h3=document.createElement('h3');h3.innerText=file.name.capitalize();span=document.createElement('span');span.innerText='';div.appendChild(h3);div.appendChild(progress);div.appendChild(span);uploadprogress.appendChild(div);var xhr=(window.ActiveXObject)?new ActiveXObject('Microsoft.XMLHTTP'): new XMLHttpRequest();xhr.open('POST',query,true);if('onprogress'in xhr.upload){Event(xhr.upload,'loadstart',function(pr){progress.max=pr.total;});Event(xhr.upload,'progress',function(pr){progress.value=pr.loaded;});Event(xhr.upload,'loadend',function(e){progress.value=e.total;span.innerText='Complete';});}xhr.send(formdata);}});}
function close_window(){window.close();}hrefroute();var willMatch=document.querySelectorAll("*[data-will-match]");if(typeof willMatch!=null&&willMatch.length>0){[].forEach.call(willMatch,function(wm){var errortag=document.createElement("span");errortag.setAttribute("data-will-match-span",true);var wmParent=wm.parentNode;wmParent.insertBefore(errortag,wm.nextElementSibling);function checkBlur(){var column=wm.name;var table=wm.getAttribute("data-will-match").split("/");var args="";var text=wm.value;var dbcolum="";if(table.length>2){dbcolum=table[1];args=table[2];}else{dbcolum=column;args=table[1];}table=table[0];var GetRequest=new HTTP();errortag.innerText="";if(text.length>0){GetRequest.get('pihype/willmatch?column='+dbcolum+"&table="+table.trim()+"&data="+text+"&args="+args,function(response){if(Number(response.data)==3){errortag.className="matchFail";errortag.innerText="Invalid `"+column+"` in "+table;}else if(Number(response.data)==1){errortag.className="matchFound";errortag.innerText="Valid `"+column+"` in "+table;}else{errortag.innerText="";}});}}
function checkKeyUp(){var next=wm.nextElementSibling;if(next!=null&&typeof next!="undefined"){if(next.hasAttribute("data-will-match-span")==true){next.innerText="";next.className="";}}}eventTrigger("blur",wm,checkBlur);eventTrigger("keyup",wm,checkKeyUp);});}var __hidealert=document.querySelectorAll('.__hide-alert');if(__hidealert.length>0){[].forEach.call(__hidealert,function(ele){var pr=ele.parentNode;var hg=pr.offsetHeight;var topz=hg/2;ele.setAttribute('style','top:'+(topz-15)+'px');});}
function DBforms(){var forms=document.forms;var xhr=(window.ActiveXObject)?new window.ActiveXObject("Microsoft.XMLHTTP"): new XMLHttpRequest();var to_a=[];for(var z=0,len=forms.length;z<len;z++){to_a[z]=forms[z];}var c=0;to_a.map(function(fm){if(!fm.hasAttribute("name"))fm.setAttribute("name","form"+c);name=fm.getAttribute("name");childs=forms[name].children;childBox=[];send_xhr=false;var lastC=childs[childs.length-1];for(var x=0,len=childs.length;x<len;x++){if(childs[x].hasAttribute('name')&&childs[x].getAttribute('name').substr(0,2)=="@@"){if(send_xhr==false)send_xhr=true;}childBox[x]={name: childs[x].getAttribute('name')||"",type: childs[x].getAttribute('type')||"",tag: childs[x].nodeName.toLowerCase()};}if(send_xhr==true){var lasm=document.createElement("input");lasm.type="hidden";lasm.name="DB_STRUCTURE";lasm.value=JSON.stringify(childBox);forms[name].prepend(lasm);}c++;});}DBforms();var morinput=document.querySelectorAll('.mor-input');var morfailedrequests=document.querySelector('.mor-failed-requests');if(morfailedrequests!==null){Event(morfailedrequests,'click',function(){if(this.hasAttribute('data-clicked')){this.style.bottom="-35px";this.lastElementChild.style.height='0px';this.removeAttribute('data-clicked');}else{this.style.bottom="0px";this.lastElementChild.style.height="300px";this.setAttribute('data-clicked',true);}});}
function __morform(){var morformgroup=document.querySelectorAll('.mor-form-group');if(morformgroup!==null){if(morformgroup.length>0){[].forEach.call(morformgroup,function(ele){var label=ele.querySelector('label');var group=ele.querySelector('input')||ele.querySelector('select')||ele.querySelector('textarea');var span=document.createElement('div');span.className="mor-form-group-span";var clearfix=document.createElement('div');clearfix.className='clearfix';if(label!==null){ele.insertBefore(clearfix,label.nextElementSibling);}var hoverdiv=document.createElement('div');hoverdiv.className='mor-hover-expand';var hoverdivinner=document.createElement('div');hoverdivinner.className='mor-hover-expand-middle';if(label!==null){var labelstyle=window.getComputedStyle(label);var labelsize=labelstyle['fontSize']||0;}var datainfo=ele.querySelectorAll('*[data-info]');if(datainfo.length>0){[].forEach.call(datainfo,function(di){var chd=document.createElement('var');chd.className='mor-question';var input=di;if(di!==null){var center=di.offsetHeight/2-10;}var div=document.createElement('div');div.style.position='relative';div.style.top='0';div.style.left='0';chd.style.top=center+'px';di.parentNode.insertBefore(div,di);var mortooltip=document.createElement('div');mortooltip.className='mor-tooltip tooltip-right tooltip-top tooltip-hide';div.appendChild(di);div.appendChild(chd);div.appendChild(mortooltip);var top=di.offsetTop/2;var p=document.createElement('p');var patt=input.hasAttribute('pattern')?input.getAttribute('pattern'): ".*";var regxp=new RegExp(patt,'g');if(di.type=='text'){p.innerText=di.getAttribute('data-info')||'This is a text field.';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'blur',___text__);Event(input,'change',___text__);Event(input,'keyup',___text__);Event(input,'input',___text__);function ___text__(){var val=input.value;if(val.length>0&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else if(di.type=='number'){p.innerText=input.getAttribute('data-info')||'This field can only accept digits 0-9.';Event(input,'keyup',function(e){if(e.key=="Backspace"){input.setAttribute('data-keyup',e.target.value);}if(e.key.match(/[0-9]/)){input.setAttribute('data-keyup',e.target.value);}else{input.value=input.value.replace(/[^0-9]/,'x');input.value=input.getAttribute('data-keyup');}});Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__number__);Event(input,'blur',__number__);Event(input,'keyup',__number__);Event(input,'input',__number__);function __number__(){var val=input.value;if(val.match(/[0-9]/)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else if(di.nodeName=="TEXTAREA"){p.innerText=input.getAttribute('data-info')||'This is a text field and can accept any character.';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__textarea__);Event(input,'blur',__textarea__);Event(input,'keyup',__textarea__);Event(input,'input',__textarea__);function __textarea__(){var val=input.value;if(val.length>1&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else if(di.nodeName=="SELECT"){p.innerText=input.getAttribute('data-info')||'This is a dropdown please select from the options below.';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__select__);Event(input,'blur',__select__);Event(input,'input',__select__);function __select__(){var val=input.value;if(val.length>0&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else if(di.type=="password"){p.innerText=input.getAttribute('data-info')||'This is a password field.Enter your secret key.';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__password__);Event(input,'blur',__password__);Event(input,'keyup',__password__);Event(input,'input',__password__);function __password__(){var val=input.value;if(val.length>0&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else if(di.type=="email"){p.innerText=input.getAttribute('data-info')||'This is an email field.eg.hello@moorexa.com';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__email__);Event(input,'keyup',__email__);Event(input,'blur',__email__);Event(input,'input',__email__);function __email__(){var val=input.value;if(val.match(/([^@]+)+[@]\w{2,}[.]\w{2,}/)&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}else{if(input.hasAttribute('type')){p.innerText=input.getAttribute('data-info')||'This is a '+input.type+'field.';Event(input,'focus',function(){chd.className='mor-question';});Event(input,'change',__other__);Event(input,'blur',__other__);Event(input,'keyup',__other__);Event(input,'input',__other__);function __other__(){var val=input.value;if(val.length>0&&val.match(regxp)&&val.trim()!=""){chd.className='mor-question input-valid';}else{chd.className='mor-question input-not-valid';}}}}mortooltip.appendChild(p);Event(input,'change',function(){if(input.value==""){chd.className='mor-question';}});Event(chd,'mouseover',function(){if(chd.className!=='mor-question'){chd.setAttribute('data-overstate',chd.className);chd.className='mor-question';}});Event(mortooltip,'click',function(){if(chd.hasAttribute('data-overstate')){chd.className=chd.getAttribute('data-overstate');chd.removeAttribute('data-overstate');}mortooltip.style.opacity='0';mortooltip.style.transform='translateX(-40px)';setTimeout(function(){mortooltip.style.display='none';},1000);chd.removeAttribute('data-click-tooltip');});Event(chd,'click',function(){var morttip=document.querySelectorAll('.mor-tooltip');var timer;[].forEach.call(morttip,function(mt){if(chd.hasAttribute('data-overstate')){chd.className=chd.getAttribute('data-overstate');chd.removeAttribute('data-overstate');}if(mt.hasAttribute('data-active')&&mt!==mortooltip){mt.removeAttribute('data-active');mt.style.opacity='0';mt.style.transform='translateX(-40px)';timer=setTimeout(function(){mt.style.display='none';},400);chd.removeAttribute('data-click-tooltip');}});if(!chd.hasAttribute('data-click-tooltip')){chd.setAttribute('data-click-tooltip',true);mortooltip.style.display='block';mortooltip.setAttribute('data-active',true);setTimeout(function(){mortooltip.style.opacity='1';mortooltip.style.transform='translateX(0px)';},100);}else{if(chd.hasAttribute('data-overstate')){chd.className=chd.getAttribute('data-overstate');chd.removeAttribute('data-overstate');}mortooltip.style.opacity='0';mortooltip.style.transform='translateX(-40px)';mortooltip.removeAttribute('data-active');setTimeout(function(){mortooltip.style.display='none';},1000);chd.removeAttribute('data-click-tooltip');}});});}hoverdiv.appendChild(hoverdivinner);ele.appendChild(hoverdiv);var errorspan="mor-form-group-span-error";if(label!==null){if(group.hasAttribute('id')){label.setAttribute('for',group.getAttribute('id'));}else{group.id=group.name;label.setAttribute('for',group.name);}}var hg=0;var ofh=0;if(group){hg=group.offsetHeight-10;ofh=group.offsetTop+group.offsetHeight;var cptstyle=window.getComputedStyle(group);var borderbottom=cptstyle['borderBottomWidth']||0;var width=cptstyle['width']||100;var shift=0;if(borderbottom!==0){group.style.borderBottomWidth=borderbottom;shift=parseInt(borderbottom);}if(borderbottom!==0&&parseInt(borderbottom)!==0){hoverdivinner.style.height=borderbottom;span.style.height=borderbottom;}var marginBottom=cptstyle['marginBottom']||0;marginBottom=parseInt(marginBottom);span.style.bottom=marginBottom+'px';if(label!==null){if(group.type!=="file"||group.type.toUpperCase()!="FILE"){label.style.top=hg+'px';}}ele.appendChild(span);if(group){group.setAttribute('placeholder','');if(group.value.length>0){label.style.top='0px';span.style.width="100%";}}group.addEventListener('focus',animateformgroup);group.addEventListener('blur',function(){if(group.value==""){if(group.type!=="file"||group.type.toUpperCase()!="FILE"){if(label!=null){label.style.top=hg+'px';label.style.float="none";label.style.marginLeft="0px";label.style.transform='scale(1)';}if(group.hasAttribute('required')){span.className=errorspan;}else{span.style.width="0%";}}}});group.addEventListener('change',function(){if(group.value.length>0){animateformgroup();}else{if(group.hasAttribute('required')){span.className=errorspan;}else{span.style.width="0%";}if(label!=null){label.style.float="none";}}});group.addEventListener('mouseover',function(){hoverdivinner.style.width="100%";});group.addEventListener('mouseout',function(){hoverdivinner.style.width="0%";});}
function animateformgroup(){span.className="mor-form-group-span";if(label!=null){label.style.top='10px';label.style.float="left";if(labelsize!==0){var sz=parseInt(labelsize)/2;label.style.marginLeft="-"+(sz)+"px";}label.style.transform='scale(0.8)';}span.style.width="100%";var morttip=document.querySelectorAll('.mor-tooltip');var timer;if(morttip.length>0){[].forEach.call(morttip,function(mt){var chd=mt.previousElementSibling;if(chd.hasAttribute('data-overstate')){chd.className=chd.getAttribute('data-overstate');chd.removeAttribute('data-overstate');}if(mt.hasAttribute('data-active')){mt.removeAttribute('data-active');mt.style.opacity='0';mt.style.transform='translateX(-40px)';timer=setTimeout(function(){mt.style.display='none';},400);chd.removeAttribute('data-click-tooltip');}});}}});}}}__morform();var setupmenu=document.querySelector('*[data-menu="setup-menu"]');if(setupmenu!==null){var appmenu=document.querySelector('.app-menu'),slideinner=document.querySelector('.content-slide-inner');Event(setupmenu,'click',function(){if(!setupmenu.hasAttribute('data-clicked')){appmenu.setAttribute('style','left:0px;');slideinner.setAttribute('style','transform:translateX(300px);filter:blur(20px);');setupmenu.setAttribute('data-clicked',true);this.className='menu close-menu';}else{appmenu.setAttribute('style','left:-500px;transition: all 0.6s ease-in-out;');slideinner.setAttribute('style','transform:translateX(0px);filter:blur(0px);');setupmenu.removeAttribute('data-clicked');this.className='menu';}});}var loadend=document.querySelectorAll('*[data-loadend]');if(loadend.length>0){[].forEach.call(loadend,function(le){var data=le.getAttribute('data-loadend');var pattern=/(.*)+[(]+(.*)+[)]/;var match=pattern.exec(data);if(match!==null&&match.length==3){var func=match[1],args=match[2].split(',');if(args.length>0){args.map(function(ele,ind,arr){if(ele=='this'){arr[ind]=le;}else if(ele.match(/[0-9]/)){arr[ind]=parseInt(ele);}else{if(ele!=""){arr[ind]=eval(ele);if(arr[ind].match(/^[.]+(.*)/)){arr[ind]=document.querySelector(arr[ind]);}else if(arr[ind].match(/^[#]+(.*)/)){arr[ind]=document.querySelector(arr[ind]);}}}});if(typeof window[func]!='undefined'){window[func].apply(this,args);}}}});}var modalbtns=document.querySelector('*[data-modal="form-btn"]');if(modalbtns!==null){var li=modalbtns.querySelectorAll('li');var modalform=document.querySelectorAll('.modal-form');[].forEach.call(li,function(ele){ele.addEventListener('click',function(){var text=this.innerText.toLowerCase().trim();var other=text=='register'?'login': 'register';if(!this.hasAttribute('class')){var notactive=document.querySelector('.modal-form.'+text);var active=document.querySelector('.modal-form.'+other);active.setAttribute('style','top:-400px;opacity:0;');setTimeout(function(){notactive.style.top='0px';notactive.style.opacity='1';[].forEach.call(li,function(elez){if(elez.hasAttribute('class')){elez.removeAttribute('class');}});ele.setAttribute('class','active');},400);setTimeout(function(){active.setAttribute('style','top:400px;opacity:0;');},900);}});});var modalclose=document.querySelector('.modal-close-btn');modalclose.addEventListener('click',function(){var accountmodal=document.querySelector('.mor-account-modal');var modalwrapper=document.querySelector('.mor-modal-wrapper');modalwrapper.style.opacity='0';setTimeout(function(){accountmodal.style.display="none";},700);});}
function loaddatasrc(){var imgs=document.querySelectorAll('img');if(imgs.length>0){[].forEach.call(imgs,function(e){if(e.hasAttribute('data-src')){var src=e.getAttribute('data-src');e.src=src;}});}var js=document.querySelectorAll('script');if(js.length>0){[].forEach.call(js,function(e){if(e.hasAttribute('data-src')&&e.type!='text/deffered'){var src=e.getAttribute('data-src');e.src=src;e.type='text/javascript';}});}}
function loadtextdeff(){var deffered=document.querySelectorAll('*[type="text/deffered"]');if(deffered.length>0){[].forEach.call(deffered,function(def){var script=document.createElement("script");script.type="text/javascript";if(def.hasAttribute("data-src")){script.src=def.getAttribute("data-src");}if(def.innerText.length>0){script.innerHTML=def.innerHTML;}script.async=def.hasAttribute("async");var body=document.body;body.insertBefore(script,body.lastElementChild.nextElementSibling);});}}
function managecomment(column){var likes=document.querySelectorAll('*[data-comment-like]');var dislikes=document.querySelectorAll('*[data-comment-dislike]');var http=HTTP;var url=document.querySelector('*[data-post-url]').getAttribute('data-post-url');var loading=LoadingController.create({duration : 60000,enableDismiss : false});loadDefaults();loadcomments();managereplies();[].forEach.call(likes,function(ele){Event(ele,'click',function(){if(ele.hasAttribute('data-comment-main')){var articleid=ele.getAttribute('data-comment-like');var main=ele.getAttribute('data-comment-main');var query=url+'moorexa/comments?t='+main+'&id='+articleid+'&action=like'+'&column='+column;$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.likes;}}});}});});[].forEach.call(dislikes,function(ele){Event(ele,'click',function(){if(ele.hasAttribute('data-comment-main')){var articleid=ele.getAttribute('data-comment-dislike');var main=ele.getAttribute('data-comment-main');var query=url+'moorexa/comments?t='+main+'&id='+articleid+'&action=dislike'+'&column='+column;$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.dislikes;}}});}});});function loadDefaults(){var mains=document.querySelectorAll('*[data-comment-main]');if(mains.length>0){[].forEach.call(mains,function(ele){if(ele.hasAttribute('data-comment-like')){var articleid=ele.getAttribute('data-comment-like');var main=ele.getAttribute('data-comment-main');var query=url+'moorexa/comments?t='+main+'&id='+articleid+'&action=like'+'&column='+column+'&method=fetch';$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.likes;}}});}if(ele.hasAttribute('data-comment-dislike')){var articleid=ele.getAttribute('data-comment-dislike');var main=ele.getAttribute('data-comment-main');var query=url+'moorexa/comments?t='+main+'&id='+articleid+'&action=dislike'+'&column='+column+'&method=fetch';$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.dislikes;}}});}if(ele.hasAttribute('data-comment-replies')){var articleid=ele.getAttribute('data-comment-replies');var main=ele.getAttribute('data-comment-main');var query=url+'moorexa/comments?t='+main+'&id='+articleid+'&action=replies'+'&column='+column+'&method=fetch';$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.replies;}}});}});}}
function addacomment(){var addcomment=document.querySelector('#mor-comment-add');if(addcomment!==null){Event(addcomment,'submit',function(e){e.preventDefault();var fullname=addcomment.fullname.value;var comment=addcomment['reply-comment'].value;if(fullname.length>2&&comment.length>2){var formdata=new FormData;formdata.append('fullname',fullname);formdata.append('comment',comment);formdata.append('id',this.getAttribute('data-comment-form'));formdata.append('column',column);formdata.append('table',this.getAttribute('data-comment-main'));var query=url+'moorexa/comments';$http.post(query,formdata,function($response){$response=JSON.parse($response);if($response.status=="success"){if('form'in $response){var commentform=document.querySelector('*[data-comment-form-inner="watch"]');commentform.innerHTML=$response['form'];}else{addcomment['reply-comment'].value="";}loadcomments();loadDefaults();}});}else{var alertctrl=AlertController.create({'title': 'Fields Error','content': 'All fields are required'});alertctrl.present();}return false;});}}
function managereplies(){var commentreply=document.querySelectorAll('*[data-comment-reply]');[].forEach.call(commentreply,function(ele){Event(ele,'click',function(){var par=ele.parentNode.parentNode.parentNode;var commentbox=par.lastElementChild;console.log(commentbox);if(!ele.hasAttribute('data-clicked')){commentbox.style.height='100%';setTimeout(function(){commentbox.style.opacity='1';},300);ele.setAttribute('data-clicked',true);}else{commentbox.style.opacity='0';setTimeout(function(){commentbox.style.height='0px';},500);ele.removeAttribute('data-clicked');}});});}
function loadcomments(){var containcomments=document.querySelector('*[data-contain-comments="true"]');var articleid=document.querySelector('*[data-comment-like]');articleid=articleid.getAttribute('data-comment-like');var query=url+'moorexa/comments/fetch/'+articleid;$http.get(query,function($response){$response=JSON.parse($response);if($response.status=="success"){if('data'in $response){containcomments.innerHTML=$response.data;managereplies();subcommentMethods();}}addacomment();});}
function subcommentMethods(){var likes=document.querySelectorAll('*[data-comment-like]');var dislikes=document.querySelectorAll('*[data-comment-dislike]');var addreply=document.querySelectorAll('*[data-comment-addreply]');[].forEach.call(likes,function(ele){Event(ele,'click',function(){if(ele.hasAttribute('data-comment-id')){var articleid=ele.getAttribute('data-comment-like');var commentid=ele.getAttribute('data-comment-id');var query=url+'moorexa/comments?commentid='+commentid+'&id='+articleid+'&action=like'+'&column='+column;$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.likes;}}});}});});[].forEach.call(dislikes,function(ele){Event(ele,'click',function(){if(ele.hasAttribute('data-comment-id')){var articleid=ele.getAttribute('data-comment-dislike');var commentid=ele.getAttribute('data-comment-id');var query=url+'moorexa/comments?commentid='+commentid+'&id='+articleid+'&action=dislike'+'&column='+column;$http.get(query,function($response){$response=JSON.parse($response);if($response.status=='success'){var status=ele.nextElementSibling;if(status.hasAttribute('class')&&status.className=='comment-status'){status.innerText=$response.dislikes;}}});}});});[].forEach.call(addreply,function(ele){Event(ele,'submit',function(e){e.preventDefault();var fullname=ele.author.value;var comment=ele['reply-comment'].value;if(fullname.length>2&&comment.length>2){var formdata=new FormData;formdata.append('reply[author]',fullname);formdata.append('reply[comment]',comment);formdata.append('reply[commentid]',this.getAttribute('data-comment-addreply'));formdata.append('reply[column]',column);formdata.append('reply[id]',this.getAttribute('data-comment-main'));var query=url+'moorexa/comments';$http.post(query,formdata,function($response){$response=JSON.parse($response);if($response.status=="success"){loadcomments();}});}return false;});});}}var __hidevalue=document.querySelectorAll('*[data-hide-value]');if(__hidevalue.length>0){[].forEach.call(__hidevalue,function(ele){var hideval=ele.getAttribute('data-hide-value');Event(ele,'focus',function(){ele.style.textShadow='none';ele.style.fontSize='100%';ele.setAttribute('data-hide-value-focus',hideval);});Event(ele,'blur',_hidevalue_);Event(ele,'change',_hidevalue_);function _hidevalue_(){ele.removeAttribute('data-hide-value-focus');ele.style.fontSize='30%';}});}var mordatatimeout=document.querySelectorAll('*[data-timeout-call]');if(mordatatimeout.length>0){[].forEach.call(mordatatimeout,function(le){var timeout;if(le.hasAttribute('data-timeout')){timeout=Number(le.getAttribute('data-timeout'));}else{timeout=1000;}var call=le.getAttribute('data-timeout-call');setTimeout(function(){var pattern=/(.*)+[(]+(.*)+[)]/;var match=pattern.exec(call);if(match!==null&&match.length==3){var func=match[1],args=match[2].split(',');if(args.length>0){args.map(function(ele,ind,arr){if(ele=='this'){arr[ind]=le;}else if(ele.match(/[0-9]/)){arr[ind]=parseInt(le);}else{if(ele!=""){arr[ind]=eval(ele);if(arr[ind].match(/^[.]+(.*)/)){arr[ind]=document.querySelector(arr[ind]);}else if(arr[ind].match(/^[#]+(.*)/)){arr[ind]=document.querySelector(arr[ind]);}}}});window[func].apply(this,args);}}},timeout);});}
function __dataupdatetable(json,ele=false){var dataupdatetable=document.querySelectorAll('*[data-update-table]');if(dataupdatetable.length>0){if(ele!==false){tablewrapper(ele,json);}else{[].forEach.call(dataupdatetable,function(ele){tablewrapper(ele,json);});}}}
function tablewrapper(ele,json,hide=false,search=false,pagenav=false){var datatableupdate=ele.querySelectorAll('*[data-table-update]');if(datatableupdate.length>0){[].forEach.call(datatableupdate,function(ol){var input=document.createElement('input');var textarea=document.createElement('textarea');var width=ol.offsetWidth;Event(ol,'dblclick',function(){var type=ol.getAttribute('data-table-update');ol.setAttribute('data-table-innertext',ol.innerText);if(type!='textarea'){if(ol.innerText!=""){input.type=type;input.setAttribute('value',ol.innerText);input.name=ol.getAttribute('data-table-name');input.style.width=width+'px';ol.innerHTML="";ol.appendChild(input);input.focus();}}else{if(ol.innerText!=""){textarea.style.width=width+'px';textarea.name=ol.getAttribute('data-table-name');textarea.innerHTML=ol.innerHTML;ol.innerHTML="";ol.appendChild(textarea);textarea.focus();}}});Event(input,'blur',updatetable);Event(textarea,'blur',updatetable);Event(input,'keypress',function(ke){if(ke.key=="Enter"){updatetable.call(this);}});function updatetable(){var inner=ol.getAttribute('data-table-innertext');if(this.value.length!=inner.length){var id=ol.parentNode.getAttribute('data-update-table-id');var table=ele.getAttribute('data-update-table');var col=ol.parentNode.getAttribute('data-update-tableid-col');var http=HTTP;var formdata=new FormData();formdata.append('update['+this.name+']',this.value);formdata.append('update[__table]',table);formdata.append('update[__id]',id);formdata.append('update[__col]',col);$http.post($url+'moorexa/tableupdate',formdata,function($res){});}ol.innerText=this.value;}});}var tableselectall=ele.querySelectorAll('*[data-table-select="all"]');[].forEach.call(tableselectall,function(sel){Event(sel,'click',function(){var selrow=ele.querySelectorAll('*[data-table-select="row"]');if(selrow.length>0){var __continue=0;[].forEach.call(selrow,function(se){if(sel.checked==true){se.checked=true;__continue +=1;}else{se.checked=false;__continue=0;}});if(__continue>0){load_dataoptions(true,ele);}else{load_dataoptions(false,ele);}}});});var tablerow=ele.querySelectorAll('*[data-update-table-id]');if(tablerow.length>0){[].forEach.call(tablerow,function(tr){Event(tr,'click',function(e){var selrow=tr.querySelector('*[data-table-select="row"]');if(e.target.nodeName!='A'){if(selrow.checked==false){selrow.checked=true;load_dataoptions(true,ele);}else{selrow.checked=false;load_dataoptions(false,ele);}}});});}var tableactiondelete=ele.querySelectorAll('*[data-table-action="delete"]');if(tableactiondelete.length>0){[].forEach.call(tableactiondelete,function(del){Event(del,'click',function(e){e.preventDefault();var prnt=del.parentNode.parentNode,id=prnt.getAttribute('data-update-table-id'),col=prnt.getAttribute('data-update-tableid-col'),table=ele.getAttribute('data-update-table');var alertctrl=AlertController.create({title : 'Confirm',content : 'Are you sure?',button :{yes : function(){var http=HTTP;var formdata=new FormData();formdata.append('delete[table]',table);formdata.append('delete[col]',col);formdata.append('delete[row]',id);$http.post($url+'moorexa/deleteTableRow',formdata,function($res){var json=JSON.parse($res);if(json.status=="success"){loadTableData(true,true);}});},no : function(){}}});alertctrl.present();return false;});})}var tableactionedit=ele.querySelectorAll('*[data-table-action="edit"]');if(tableactionedit.length>0){[].forEach.call(tableactionedit,function(edi){Event(edi,'click',function(e){e.preventDefault();load_dataoptions(false,ele,true);var prnt=edi.parentNode.parentNode,id=prnt.getAttribute('data-update-table-id'),col=prnt.getAttribute('data-update-tableid-col'),table=ele.getAttribute('data-update-table'),config=ele.querySelector('*[data-table-json]').innerText.trim();var modal=ModalController.push({page : 'moorexa/editTable',button :{Update : function($res){if($res.status=='success'){loadTableData(true,true);}}},data :{id : id,col : col,table : table,config : config},auto : true,class : 'mor-tableform'});return false;})});}var tableactioneadd=ele.querySelector('*[data-table-action="add"]');if(tableactioneadd!=null&&search==false){var table=ele.getAttribute('data-update-table');var form=document.querySelector('*[data-table-create="'+table+'"]');Event(tableactioneadd,'click',function(e){e.preventDefault();load_dataoptions(false,ele,true);var modal=ModalController.push({page : form,button :{Create : function($res){if($res.status=='success'){loadTableData(true);}}},data :{table : table},auto : true,clear : true});});}var tablepageid=ele.querySelectorAll('*[data-table-pageid]');if(tablepageid.length>0&&search==false){[].forEach.call(tablepageid,function(pg){var pgi=pg.getAttribute('data-table-pageid');if(pgi!='next'){Event(pg,'click',function(e){e.preventDefault();__pagination.call(this,false,ele,json);tablewrapper(ele,json,false,false,true);return false;});}else{if(pagenav==false){tablewrapper2(ele,json);}}});}var currentpage=ele.querySelector('input[name="currentpage"]');if(currentpage!=null&&hide==false&&search==false){Event(currentpage,'keyup',function(e){var val=this.value.replace(/[^0-9]/,'g');var index=1;var gonemax="";if(val!=""){if(val>0){if('data'in json){var total=Math.ceil(json.data.length/10);if(val>total){this.value=total;gonemax=total;}else{index=this.value;gonemax='';}}}else{this.value=1;}}var pgid="";if(gonemax!=""){pgid=gonemax;}else{pgid=Number(this.value==""?1 : this.value)}var get=10 * pgid,nextIndex=get-10;var headers=ele.querySelector('*[data-table-headers]').innerHTML.trim();var pri=ele.getAttribute('data-update-table-pri');var tbody=ele.querySelector('tbody');if(this.value!=""){var _index=gonemax!=""?gonemax : this.value;var ap=ele.querySelector('*[data-table-pageid="'+_index+'"]');if(ap!=null){var par=ele.querySelector('.active-page');par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";ap.setAttribute('class','active-page');ap.removeAttribute('data-table-pageid');ap.removeAttribute('href');}}gonemax="";tbody.innerHTML="";var res=json;if('data'in json){for(var row in res.data){if(row >=nextIndex&&row<get){var tid=res.data[row][0][pri];var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',tid);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);}}}tablewrapper(ele,json,true,false,true);});Event(currentpage,'blur',function(){if(this.value==""){this.value=1;var ap=ele.querySelector('*[data-table-pageid="1"]');if(ap!=null){var par=ele.querySelector('.active-page');par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";ap.setAttribute('class','active-page');ap.removeAttribute('data-table-pageid');ap.removeAttribute('href');}}})}var searchbox=ele.querySelector('input[name="tablesearch"]');if(searchbox!==null&&hide==false){var headers=ele.querySelector('*[data-table-headers]').innerHTML.trim();var pri=ele.getAttribute('data-update-table-pri');var tbody=ele.querySelector('tbody');Event(searchbox,'keyup',function(){var input=this.value;var max=10;var current=1;if(input==""){reloadTableData(json,ele);__dataupdatetable(json,ele);}else{tbody.innerHTML="";var seen=0;if('data'in json){for(var row in json.data){for(var i in json.data[row][0]){if(i!=pri){var val=json.data[row][0][i];var regxp=new RegExp(input,'gim');if(current <=max){if(val.match(regxp)){seen +=1;var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',json.data[row][0][pri]);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}current +=1;}}}}}}if(seen>0){tablewrapper(ele,json,true,true);}}});}load_dataoptions(false,ele,true);}var __called=0;function load_dataoptions(show=true,ele,all=false){var datatableoptions=ele.querySelector('*[data-table-options="dropdown"]');__called +=1;if(datatableoptions!=null){var options='<option value="">-- Action -- </option>';options +='<option value="delete">Delete </option>';options +='<option value="print">Print</options>';options +='<option value="export">Export</options>';if(show==true){datatableoptions.innerHTML=options;if(__called==1){Event(datatableoptions,'change',function(){if(this.value!=""){if(this.value=='delete'){var selrow=document.querySelectorAll('*[data-table-select="row"]');var __del=[],col="",table=ele.getAttribute('data-update-table');[].forEach.call(selrow,function(sr){if(sr.checked==true){var tr=sr.parentNode.parentNode.getAttribute('data-update-table-id');var trid=sr.parentNode.parentNode.getAttribute('data-update-tableid-col');col=trid;__del[__del.length++]=tr;}});var alertctrl=AlertController.create({title : 'Confirm',content : 'Are you sure?',button :{yes : function(){var http=HTTP;var formdata=new FormData();formdata.append('delete[table]',table);formdata.append('delete[col]',col);formdata.append('delete[row]',__del);$http.post($url+'moorexa/deleteTableRow',formdata,function($res){load_dataoptions(false,ele);load_dataoptions(true,ele);var json=JSON.parse($res);if(json.status=="success"){loadTableData();}});},no : function(){load_dataoptions(false,ele);load_dataoptions(true,ele);}}});alertctrl.present();}}});}}else{var selrow=ele.querySelectorAll('*[data-table-select="row"]');if(all===true){var tableselectall=ele.querySelector('*[data-table-select="all"]');tableselectall.checked=false;if(selrow.length>0){[].forEach.call(selrow,function(ez){if(ez.checked==true){ez.checked=false;}});datatableoptions.innerHTML="";}}else{if(selrow.length>0){var $close="";[].forEach.call(selrow,function(ez){if(ez.checked==true){if($close==""){$close=true;}}});if($close==""){datatableoptions.innerHTML="";}}else{datatableoptions.innerHTML="";}}}}}
function tablewrapper2(ele,json){if(ele!==false){var nexttab=ele.querySelector('*[data-table-pageid="next"]');if(nexttab!=null){Event(nexttab,'click',function(e){e.preventDefault();e.cancelBubble=true;if(!this.hasAttribute('data-clicked')){this.setAttribute('data-clicked',true);_nexttab.call(this,null);}return false;});var clk=0;function _nexttab(){clk +=1;console.log(clk);if(clk==1){var par=this.parentNode.querySelector('.active-page');if(par!=null){var nextpage=Number(par.innerText)+1;var total=Math.ceil(json.data.length/10);var $id=nextpage;if(par.innerText!=total){__pagination.call(this,nextpage,ele,json);}else{$id=1;__pagination.call(this,1,ele,json);}}clk=0;}}}}}var _called=0;function __pagination($id=false,ele,json){var pgid;var currentpage=ele.querySelector('input[name="currentpage"]');_called +=1;if(_called==1){if($id!==false){pgid=$id;var par=this.parentNode.querySelector('.active-page');if(par!=null){par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";}currentpage.value=$id;var _acp=this.parentNode.querySelector('*[data-table-pageid="'+$id+'"]');if(_acp!==null){_acp.setAttribute('class','active-page');_acp.removeAttribute('data-table-pageid');_acp.removeAttribute('href');}}else{pgid=Number(this.innerText);var par=this.parentNode.querySelector('.active-page');par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";this.setAttribute('class','active-page');this.removeAttribute('data-table-pageid');this.removeAttribute('href');currentpage.value=this.innerText;var nexttab=ele.querySelector('*[data-table-pageid="next"]');if(nexttab.hasAttribute("data-clicked")){nexttab.removeAttribute('data-clicked');}}var get=10 * pgid,nextIndex=get-10;var headers=ele.querySelector('*[data-table-headers]').innerHTML.trim();var pri=ele.getAttribute('data-update-table-pri');var tbody=ele.querySelector('tbody');tbody.innerHTML="";var res=json;var searchbox=ele.querySelector('input[name="tablesearch"]');if(searchbox.value!=""){var input=searchbox.value;if('data'in json){for(var row in json.data){if(row >=nextIndex&&row<get){for(var i in json.data[row][0]){if(i!=pri){var val=json.data[row][0][i];var regxp=new RegExp(input,'gim');if(val.match(regxp)){var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',json.data[row][0][pri]);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);}}}}}}}else{if('data'in json){for(var row in res.data){if(row >=nextIndex&&row<get){var tid=res.data[row][0][pri];var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',tid);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);}}}}_called=0;}if($id!==false){tablewrapper(ele,json,false,false,true);this.removeAttribute('data-clicked');_called=0;}}
function _tabkleWasUpdated($index,json,ele,loader){var currentpage=ele.querySelector('input[name="currentpage"]');var pgid=Number($index);var get=10 * pgid,nextIndex=get-10;var headers=ele.querySelector('*[data-table-headers]').innerHTML.trim();var pri=ele.getAttribute('data-update-table-pri');var tbody=ele.querySelector('tbody');if(currentpage.value!=""){var _index=$index;var tablepagination=document.querySelector('.mor-table-pagination');var pageid=tablepagination.querySelectorAll('a');if(pageid.length>0){var seen="";[].forEach.call(pageid,function(pid){var _pid=Number(pid.innerText);var total=Math.ceil(json.data.length/10);if(_pid>0){if(_pid>total){tablepagination.removeChild(pid);currentpage.value=1;currentpage.nextElementSibling.innerText=total;var ap=ele.querySelector('*[data-table-pageid="1"]');if(ap!=null){var par=ele.querySelector('.active-page');par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";ap.setAttribute('class','active-page');ap.removeAttribute('data-table-pageid');ap.removeAttribute('href');}}if(_pid==_index){if(seen==""){seen=true;}}else{if(seen==""){seen=false;}}}});if(seen!=""&&seen===false){var tnewele=document.createElement('a');tnewele.href="";tnewele.setAttribute('data-table-pageid',_index);tnewele.innerText=_index;tablepagination.insertBefore(tnewele,tablepagination.lastElementChild);currentpage.nextElementSibling.innerText=_index;}}var ap=ele.querySelector('*[data-table-pageid="'+_index+'"]');if(ap!=null){var par=ele.querySelector('.active-page');par.setAttribute('data-table-pageid',par.innerText);par.removeAttribute('class');par.href="";ap.setAttribute('class','active-page');ap.removeAttribute('data-table-pageid');ap.removeAttribute('href');}currentpage.value=_index;}tbody.innerHTML="";var res=json;if('data'in json){for(var row in res.data){if(row >=nextIndex&&row<get){var tid=res.data[row][0][pri];var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',tid);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);}}}loader.dismiss();}
function loadTableData($add=false,$del=false){var dataloadtable=document.querySelectorAll('*[data-load-table]');if(dataloadtable.length>0){[].forEach.call(dataloadtable,function(ele){var tbody=ele.querySelector('tbody');var table=ele.getAttribute('data-load-table');tbody.innerHTML="";var http=HTTP;var query=$url+'moorexa/fetchTableData';var headers=ele.parentNode.querySelector('*[data-table-headers]').innerHTML.trim();var formdata=new FormData();formdata.append('table[name]',table);formdata.append('table[header]',headers);formdata.append('table[where]',ele.parentNode.querySelector('*[data-table-headers]').getAttribute('data-table-headers'));formdata.append('table[primary]',ele.parentNode.getAttribute('data-update-table-pri'));formdata.append('table[config]',ele.parentNode.querySelector('*[data-table-json]').innerText.trim());var loader=LoadingController.create({duration: 70000,enableDismiss : false,content : 'Please wait'});loader.present();$http.post(query,formdata,function($res){var res=JSON.parse($res);var max=10;var current=1;var currentpage=ele.parentNode.querySelector('input[name="currentpage"]');if(currentpage!==null&&$add==true){var val=currentpage.value;var $index=0;if($del===true){$index=Number(val);}else{$index=Math.ceil(res.data.length/10);}_tabkleWasUpdated($index,res,ele.parentNode,loader);__dataupdatetable(res,ele.parentNode);}else{if('data'in res){for(var row in res.data){if(current <=max){var pri=ele.parentNode.getAttribute('data-update-table-pri');var tid=res.data[row][0][pri];var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',tid);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.parentNode.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);current +=1;}}}loader.dismiss();__dataupdatetable(res);}});});}}loadTableData();function reloadTableData(res,ele){var max=10;var current=1;var tbody=ele.querySelector('tbody');var headers=ele.querySelector('*[data-table-headers]').innerHTML.trim();tbody.innerHTML="";if('data'in res){for(var row in res.data){if(current <=max){var pri=ele.getAttribute('data-update-table-pri');var tid=res.data[row][0][pri];var tr=document.createElement('tr');tr.setAttribute('data-update-table-id',tid);tr.setAttribute('data-update-tableid-col',pri);var td=document.createElement('td');td.innerHTML='<input type="checkbox"data-table-select="row">';tr.appendChild(td);var header=JSON.parse(headers);for(var th in header){var thr=header[th];var td=document.createElement('td');td.setAttribute('data-table-name',thr);var val=res.data[row][0][thr];var len=val.length;if(val.indexOf("{")==0&&val.lastIndexOf('}')==len-1){var pj=JSON.parse(val);td.innerHTML=pj.value;}else{if(val.length>150){td.setAttribute('data-table-update','textarea');}else{td.setAttribute('data-table-update','text');}td.innerHTML=val;}tr.appendChild(td);}if(!ele.hasAttribute('data-update-controls')){var td=document.createElement('td');td.innerHTML='<a href=""class="btn mor-btn mor-edit"data-table-action="edit"></a><a href=""class="btn mor-btn mor-trash"data-table-action="delete"></a>';tr.appendChild(td);}tbody.appendChild(tr);current +=1;}}}}
function rexaApp(w){'use strict';var avail=false;var init=null;this.pages={};if(!Element.prototype.on){Element.prototype.on=function(event,callback){Event(this,event,callback);}}
this.init=function(id,callback){init=_a(id,'init');if(init.avail){avail=true;var page=new this.page;page.pages=this.pages;page.init=init;var tools={page : page};page=null;this.getpages(id,init);callback.call(tools,tools);}}
this.page=function(){if(avail){this.on=function(e,callback){var inite=this.init.node[0];var ch=_a(e,'page');if(ch.avail){var ele=ch.node;[].forEach.call(ele,(x)=>{x.on('waiting',()=>{var data={ready:false,waiting:true,element:x,param:[]};callback.call({},data);});x.on('ready',()=>{$http.listen(e,function(ex){if(ex.length>0){var data={ready:true,waiting:false,element:x,param:ex};callback.call({},data);}});});});ele=null,ch=null,inite=null;}}}}
this.getpages=function(id,init){var node=init.node[0];var pages=a('page',node);if(pages.length>0){this.pages[id]=pages.node;}}
this.request=function(page,callback){$http.header={'User-Request':'Moorexa Route Private'};var thh=this;$http.get($url+'$route/'+page,function(data){var domele=document.createElement('html');domele.innerHTML=data.text;var head=domele.querySelector('head');document.title=head.querySelector('title').innerText;var headc=document.querySelector('head');var body=domele.querySelector('body');if(body!=null){var scripts=body.querySelectorAll('script');var mainScripts=document.body.querySelectorAll('script');var replace=false;[].forEach.call(scripts,(s)=>{[].forEach.call(mainScripts,(m)=>{if(m.outerHTML==s.outerHTML){body.removeChild(s);}});});if(init!=null){var ele=init.node[0];ele.innerHTML=body.innerHTML;}else{document.body.innerHTML=body.innerHTML;}}else{if(init!=null){var ele=init.node[0];ele.innerHTML=data.text;}else{document.body.innerHTML=data.text;}}window.history.pushState({"html": document.body.innerHTML,"pageTitle": document.title},"",$url+page);callback.call(thh,thh);});}
function _a(id,as){var first,second;first=document.querySelectorAll('*[data-'+as+'="'+id+'"]');second=document.querySelectorAll('*['+as+'="'+id+'"]');if(first.length>0){return{'avail': true,'node': first};}else{if(second.length>0){return{'avail': true,'node': second};}}return{'avail': false,'node':[]};}
function a(as,node=document){var f,s;f=node.querySelectorAll('*['+as+']');s=node.querySelectorAll('*[data-'+as+']');if(f.length>0){return{'length': f.length,'attr': as,'node': f};}return{'length': s.length,'attr': 'data-'+as,'node': s};}}var rexa=new rexaApp();function formalert(){var __messagewrapper=document.querySelectorAll('.__message-wrapper');if(__messagewrapper.length>0){[].forEach.call(__messagewrapper,function(ele){setTimeout(function(){ele.style.visibility="visible";},300);});}}(function(){'use strict';if(!Element.prototype.on){Element.prototype.on=function(event,callback){Event(this,event,callback);}}var page=function(){var pg=a('page');if(pg.length>0){[].forEach.call(pg.node,(e)=>{rexa.pages[e.getAttribute(pg.attr)]=e;e.on('click',(x)=>{x.preventDefault();x.cancelBubble=true;var page=e.getAttribute(pg.attr);e.trigger('waiting');rexa.request(page,(data)=>{rexa.response=data.text;e.trigger('ready');loaddatasrc();__morform();formalert();});});});}}();function a(as){var f,s;f=document.querySelectorAll('*['+as+']');s=document.querySelectorAll('*[data-'+as+']');if(f.length>0){return{'length': f.length,'attr': as,'node': f};}return{'length': s.length,'attr': 'data-'+as,'node': s};}})();var selector={get : function(attr){return document.querySelector(attr);},all : function(attr){return document.querySelectorAll(attr);}};function getFormdata(attr){var form=selector.get(attr);if(form!=null){var ele={},sel=form.all('select'),inp=form.all('input'),text=form.all('textarea'),btn=form.all('button');if(sel.length>0){[].forEach.call(sel,(e)=>{ele[e.name]=e.value.trim();});}if(inp.length>0){[].forEach.call(inp,(e)=>{ele[e.name]=e.value.trim();});}if(text.length>0){[].forEach.call(text,(e)=>{ele[e.name]=e.value.trim();});}if(btn.length>0){[].forEach.call(btn,(e)=>{if(e.value.length>0){ele[e.name]=e.value.trim();}});}return ele;}return null;}